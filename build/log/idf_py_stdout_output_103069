ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0x1 (POWERON),boot:0xc (SPI_FAST_FLASH_BOOT)
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (23) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (24) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (24) boot: chip revision: v0.0[0m
[0;32mI (27) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (32) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (36) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (41) boot: Enabling RNG early entropy source...[0m
[0;32mI (47) boot: Partition Table:[0m
[0;32mI (50) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (57) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (65) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (72) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (80) boot: End of partition table[0m
[0;32mI (84) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (101) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (108) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (142) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (148) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (153) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (154) boot: Disabling RNG early entropy source...[0m
[0;32mI (171) cpu_start: Unicore app[0m
[0;33mW (180) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (186) cpu_start: Pro cpu start user code[0m
[0;32mI (186) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (187) cpu_start: Application information:[0m
[0;32mI (189) cpu_start: Project name:     wamr-simple[0m
[0;32mI (195) cpu_start: App version:      bffdd1b[0m
[0;32mI (200) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (206) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (211) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (216) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (221) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (226) cpu_start: Chip rev:         v0.0[0m
[0;32mI (231) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (238) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (244) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (250) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (257) spi_flash: detected chip: generic[0m
[0;32mI (261) spi_flash: flash io: dio[0m
[0;33mW (265) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (278) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (285) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (292) main_task: Started on CPU0[0m
[0;32mI (292) main_task: Calling app_main()[0m
[0;32mI (292) wamr: Initialize WASM runtime[0m
[0;32mI (302) wamr: Run wamr with interpreter[0m
[0;32mI (302) wamr: Instantiate WASM runtime[0m
[00:00:00:656 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:827 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:819 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:834 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:816 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:827 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:821 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:822 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:813 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:822 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:816 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (241) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:810 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:822 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:825 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:824 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:820 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:810 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:822 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:825 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:823 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:813 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:831 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:827 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:825 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:819 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:824 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:834 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812c50: 0x40812ff0 0x40813250 0x42030938 0x40809b68 0x4080c438 0x42030938 0x4080c448 0x42028d56
40812c70: 0x4080c44c 0x40812c84 0x4080c450 0x42028d00 0x4080c294 0x00323933 0x408120a8 0x65737361
40812c90: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812cb0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812cd0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812cf0: 0x72612070 0x22736165 0x00000029 0x408138a8 0x40813658 0x4082b9e4 0x00000001 0x00018000
40812d10: 0x40812ff0 0x4081312c 0x00000080 0x400316c6 0x0005a4aa 0x00000000 0x408120a8 0x4202b13c
40812d30: 0x4202df50 0x40812dbc 0x40813024 0x00000005 0x0000004b 0xffff0208 0x40812ff0 0x0000007f
40812d50: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813658 0x4082b9e4 0x00000001 0x00018000
40812d70: 0x00008000 0x000000b8 0x00018000 0x40800a6e 0x00008000 0x000000b8 0x408137b0 0x40809b8e
40812d90: 0x40813658 0x4082b9e4 0x408137b0 0x4200742c 0x00008000 0x000000b8 0x408137b0 0x4200faac
40812db0: 0x000000b8 0x00000003 0x00000000 0x4200787a 0x00000000 0x00000000 0x00000001 0x42007e80
40812dd0: 0x00008000 0x000000b8 0x408137b0 0x42009702 0x40812e08 0x00000004 0x40813250 0x40809b72
40812df0: 0x00001800 0x00010000 0x40813250 0x420073b0 0x40812ff0 0x00000024 0x00018000 0x00000000
40812e10: 0x40813250 0x00000018 0x40813250 0x00000000 0x00000080 0x40812ff0 0x40813658 0x408138a8
40812e30: 0x00000000 0x408138a8 0x40813250 0x00000000 0x408137b0 0x00000000 0x00000000 0x42009824
40812e50: 0x00000000 0x40812ff0 0x00000080 0x42009198 0x00000000 0x00008000 0x00000000 0x00000001
40812e70: 0x00008000 0x00000078 0x40813250 0x00000000 0x40813880 0x00000080 0x40812ff0 0x00000000
40812e90: 0x00000000 0x00000000 0x00000001 0x40813658 0x00008000 0x4081382c 0x40813250 0x42009e86
40812eb0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812ed0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812ef0: 0x00000000 0x00000000 0x40813250 0x42008256 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x42008274
40812f10: 0x4202a620 0x0000015c 0x00000004 0x4200717c 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073a2
40812f30: 0x420073cc 0x4200741a 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812f50: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812f70: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812f90: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812fb0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812fd0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812ff0: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813010: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813030: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:819 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812c50: 0x40812ff0 0x40813250 0x42030938 0x40809b68 0x4080c438 0x42030938 0x4080c448 0x42028d56
40812c70: 0x4080c44c 0x40812c84 0x4080c450 0x42028d00 0x4080c294 0x00323933 0x408120a8 0x65737361
40812c90: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812cb0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812cd0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812cf0: 0x72612070 0x22736165 0x00000029 0x408138a8 0x40813658 0x4082b9e4 0x00000001 0x00018000
40812d10: 0x40812ff0 0x4081312c 0x00000080 0x400316c6 0x0005a49b 0x00000000 0x408120a8 0x4202b13c
40812d30: 0x4202df50 0x40812dbc 0x40813024 0x00000005 0x0000004b 0xffff0208 0x40812ff0 0x0000007f
40812d50: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813658 0x4082b9e4 0x00000001 0x00018000
40812d70: 0x00008000 0x000000b8 0x00018000 0x40800a6e 0x00008000 0x000000b8 0x408137b0 0x40809b8e
40812d90: 0x40813658 0x4082b9e4 0x408137b0 0x4200742c 0x00008000 0x000000b8 0x408137b0 0x4200faac
40812db0: 0x000000b8 0x00000003 0x00000000 0x4200787a 0x00000000 0x00000000 0x00000001 0x42007e80
40812dd0: 0x00008000 0x000000b8 0x408137b0 0x42009702 0x40812e08 0x00000004 0x40813250 0x40809b72
40812df0: 0x00001800 0x00010000 0x40813250 0x420073b0 0x40812ff0 0x00000024 0x00018000 0x00000000
40812e10: 0x40813250 0x00000018 0x40813250 0x00000000 0x00000080 0x40812ff0 0x40813658 0x408138a8
40812e30: 0x00000000 0x408138a8 0x40813250 0x00000000 0x408137b0 0x00000000 0x00000000 0x42009824
40812e50: 0x00000000 0x40812ff0 0x00000080 0x42009198 0x00000000 0x00008000 0x00000000 0x00000001
40812e70: 0x00008000 0x00000078 0x40813250 0x00000000 0x40813880 0x00000080 0x40812ff0 0x00000000
40812e90: 0x00000000 0x00000000 0x00000001 0x40813658 0x00008000 0x4081382c 0x40813250 0x42009e86
40812eb0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812ed0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812ef0: 0x00000000 0x00000000 0x40813250 0x42008256 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x42008274
40812f10: 0x4202a620 0x0000015c 0x00000004 0x4200717c 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073a2
40812f30: 0x420073cc 0x4200741a 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812f50: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812f70: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812f90: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812fb0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812fd0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812ff0: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813010: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813030: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:833 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812c50: 0x40812ff0 0x40813250 0x42030938 0x40809b68 0x4080c438 0x42030938 0x4080c448 0x42028d56
40812c70: 0x4080c44c 0x40812c84 0x4080c450 0x42028d00 0x4080c294 0x00323933 0x408120a8 0x65737361
40812c90: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812cb0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812cd0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812cf0: 0x72612070 0x22736165 0x00000029 0x408138a8 0x40813658 0x4082b9e4 0x00000001 0x00018000
40812d10: 0x40812ff0 0x4081312c 0x00000080 0x400316c6 0x0005a4a9 0x00000000 0x408120a8 0x4202b13c
40812d30: 0x4202df50 0x40812dbc 0x40813024 0x00000005 0x0000004b 0xffff0208 0x40812ff0 0x0000007f
40812d50: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813658 0x4082b9e4 0x00000001 0x00018000
40812d70: 0x00008000 0x000000b8 0x00018000 0x40800a6e 0x00008000 0x000000b8 0x408137b0 0x40809b8e
40812d90: 0x40813658 0x4082b9e4 0x408137b0 0x4200742c 0x00008000 0x000000b8 0x408137b0 0x4200faac
40812db0: 0x000000b8 0x00000003 0x00000000 0x4200787a 0x00000000 0x00000000 0x00000001 0x42007e80
40812dd0: 0x00008000 0x000000b8 0x408137b0 0x42009702 0x40812e08 0x00000004 0x40813250 0x40809b72
40812df0: 0x00001800 0x00010000 0x40813250 0x420073b0 0x40812ff0 0x00000024 0x00018000 0x00000000
40812e10: 0x40813250 0x00000018 0x40813250 0x00000000 0x00000080 0x40812ff0 0x40813658 0x408138a8
40812e30: 0x00000000 0x408138a8 0x40813250 0x00000000 0x408137b0 0x00000000 0x00000000 0x42009824
40812e50: 0x00000000 0x40812ff0 0x00000080 0x42009198 0x00000000 0x00008000 0x00000000 0x00000001
40812e70: 0x00008000 0x00000078 0x40813250 0x00000000 0x40813880 0x00000080 0x40812ff0 0x00000000
40812e90: 0x00000000 0x00000000 0x00000001 0x40813658 0x00008000 0x4081382c 0x40813250 0x42009e86
40812eb0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812ed0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812ef0: 0x00000000 0x00000000 0x40813250 0x42008256 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x42008274
40812f10: 0x4202a620 0x0000015c 0x00000004 0x4200717c 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073a2
40812f30: 0x420073cc 0x4200741a 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812f50: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812f70: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812f90: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812fb0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812fd0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40812ff0: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813010: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813030: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:815 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:823 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:818 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:840 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:816 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:819 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:824 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:821 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:827 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:829 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:829 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (241) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:804 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:818 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:818 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:822 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:830 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:830 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:820 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:823 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812c8c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030938 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x18000) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x4200742c in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200faac in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x4200787a in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007e80 in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408137b0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x42009702 in memory_instantiate (module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, memory=memory@entry=0x408137b0, memory_idx=memory_idx@entry=0, num_bytes_per_page=98304, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009824 in memories_instantiate (module=module@entry=0x40813250, module_inst=module_inst@entry=0x40813658, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009e86 in wasm_instantiate (module=0x40813250, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x42008256 in wasm_runtime_instantiate_internal (module=module@entry=0x40813250, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x42008274 in wasm_runtime_instantiate (module=module@entry=0x40813250, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40812ff0 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x4200717c in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:68
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 034c59811

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Mar 24 2024 02:02:17[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a548h ( 42312) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a570 vaddr=40800000 size=05aa8h ( 23208) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=27034h (159796) map[0m
[0;32mI (192) esp_image: segment 3: paddr=0004705c vaddr=40805aa8 size=05134h ( 20788) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c198 vaddr=4080abe0 size=020a8h (  8360) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      bffdd1b[0m
[0;32mI (255) cpu_start: Compile time:     Mar 24 2024 02:02:12[0m
[0;32mI (261) cpu_start: ELF file SHA256:  034c59811...[0m
[0;32mI (266) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (276) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (281) cpu_start: Chip rev:         v0.0[0m
[0;32mI (286) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (293) heap_init: At 4080DCC0 len 0006E950 (442 KiB): RAM[0m
[0;32mI (299) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (305) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (316) spi_flash: flash io: dio[0m
[0;33mW (320) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (340) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (358) wamr: Instantiate WASM runtime[0m
[00:00:00:829 - 408120A8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812c50  GP      : 0x4080b3e0  
TP      : 0x40808c7c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812c8c  A1      : 0x4080c295  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812dcd  
S4      : 0x4080c294  S5      : 0x4082b9e4  S6      : 0x40813658  S7      : 0x408138a8  
S8      : 0x00000000  S9      : 0x40812ff0  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00