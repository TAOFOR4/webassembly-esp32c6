ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0x1 (POWERON),boot:0xc (SPI_FAST_FLASH_BOOT)
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (23) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (24) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (24) boot: chip revision: v0.0[0m
[0;32mI (27) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (32) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (36) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (41) boot: Enabling RNG early entropy source...[0m
[0;32mI (47) boot: Partition Table:[0m
[0;32mI (50) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (57) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (65) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (72) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (80) boot: End of partition table[0m
[0;32mI (84) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (101) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (108) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (142) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (148) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (154) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (154) boot: Disabling RNG early entropy source...[0m
[0;32mI (171) cpu_start: Unicore app[0m
[0;33mW (180) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (186) cpu_start: Pro cpu start user code[0m
[0;32mI (187) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (187) cpu_start: Application information:[0m
[0;32mI (189) cpu_start: Project name:     wamr-simple[0m
[0;32mI (195) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (200) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (206) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (212) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (217) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (222) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (227) cpu_start: Chip rev:         v0.0[0m
[0;32mI (231) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (238) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (245) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (251) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (258) spi_flash: detected chip: generic[0m
[0;32mI (262) spi_flash: flash io: dio[0m
[0;33mW (266) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (279) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (286) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (293) main_task: Started on CPU0[0m
[0;32mI (293) main_task: Calling app_main()[0m
[0;32mI (293) wamr: Initialize WASM runtime[0m
[0;32mI (303) wamr: Run wamr with interpreter[0m
[0;32mI (313) wamr: Instantiate WASM runtime[0m
[00:00:00:195 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:560 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:543 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:551 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:558 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:553 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:558 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:542 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:550 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (226) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:569 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:551 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:558 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:538 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:528 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:557 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:558 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:539 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:545 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:556 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:546 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:545 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:547 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:558 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:547 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:555 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:550 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a776 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e80: 0x00008000 0x000000b8 0x00009420 0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
40812f60: 0x00000000 0x40813100 0x00000080 0x420091f4 0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812fe0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
40813040: 0x42007428 0x42007476 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130c0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:541 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:551 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:530 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:554 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:544 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:560 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=0x40813370, module_inst=0x40813798, parent=0x0, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:540 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=<optimized out>, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=<optimized out>, heap_size=<optimized out>, max_memory_pages=max_memory_pages@entry=0, error_buf=<optimized out>, error_buf_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=<optimized out>, stack_size=<optimized out>, heap_size=<optimized out>, error_buf=<optimized out>, error_buf_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:550 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:541 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:554 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:554 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:543 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:550 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:550 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:553 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:539 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:555 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:545 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:542 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:561 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:535 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:546 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:544 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:560 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:541 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a76d 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e80: 0x00008000 0x000000b8 0x00009420 0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
40812f60: 0x00000000 0x40813100 0x00000080 0x420091f4 0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812fe0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
40813040: 0x42007428 0x42007476 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130c0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:556 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:536 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:548 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:550 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:561 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:539 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:548 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:542 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:554 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:536 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a768 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e80: 0x00008000 0x000000b8 0x00009420 0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
40812f60: 0x00000000 0x40813100 0x00000080 0x420091f4 0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812fe0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
40813040: 0x42007428 0x42007476 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130c0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a778 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e80: 0x00008000 0x000000b8 0x00009420 0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
40812f60: 0x00000000 0x40813100 0x00000080 0x420091f4 0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812fe0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
40813040: 0x42007428 0x42007476 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130c0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:540 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:544 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a770 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
40812f60: 0x00000000 0x40813100 0x00000080 0x420091f4 0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812fe0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
40813040: 0x42007428 0x42007476 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130c0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:548 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:559 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:546 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:553 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:550 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:554 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:560 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:542 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:548 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:543 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:538 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:551 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:560 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:558 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:543 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:547 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:529 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:546 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:561 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:553 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:546 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a772 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e80: 0x00008000 0x000000b8 0x00009420 0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
40812f60: 0x00000000 0x40813100 0x00000080 0x420091f4 0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812fe0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
40813040: 0x42007428 0x42007476 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130c0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:556 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (226) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:565 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:527 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:550 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=<optimized out>, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=<optimized out>, heap_size=<optimized out>, max_memory_pages=max_memory_pages@entry=0, error_buf=<optimized out>, error_buf_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=<optimized out>, stack_size=<optimized out>, heap_size=<optimized out>, error_buf=<optimized out>, error_buf_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:556 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:559 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:550 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:543 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:559 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:556 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:551 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a777 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e80: 0x00008000 0x000000b8 0x00009420 0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
40812f60: 0x00000000 0x40813100 0x00000080 0x420091f4 0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812fe0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130c0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:546 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:548 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:538 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a76a 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e80: 0x00008000 0x000000b8 0x00009420 0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
40812f60: 0x00000000 0x40813100 0x00000080 0x420091f4 0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812fe0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
40813040: 0x42007428 0x42007476 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:547 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:535 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a767 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e80: 0x00008000 0x000000b8 0x00009420 0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
40812f60: 0x00000000 0x40813100 0x00000080 0x420091f4 0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812fe0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
40813040: 0x42007428 0x42007476 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (226) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:569 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a789 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e80: 0x00008000 0x000000b8 0x00009420 0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
40812f60: 0x00000000 0x40813100 0x00000080 0x420091f4 0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812fe0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130c0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:541 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a76d 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e80: 0x00008000 0x000000b8 0x00009420 0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
40812fe0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
40813040: 0x42007428 0x42007476 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130c0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:554 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:557 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:554 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x0) at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:540 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside hea") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside hea") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside hea") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:553 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:546 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (226) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:561 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:545 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:554 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:546 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:559 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside hea") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside hea") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside hea") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:553 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_c") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:551 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:563 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "asse") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=0x42028d56 "", line=<optimized out>, func=<optimized out>, expr=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:550 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:551 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:537 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:551 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a777 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e80: 0x00008000 0x000000b8 0x00009420 0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
40812f60: 0x00000000 0x40813100 0x00000080 0x420091f4 0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
40813040: 0x42007428 0x42007476 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130c0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:557 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=0, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:556 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=0x40813798, parent=<optimized out>, memory=0x408138f0, memory_idx=<optimized out>, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=32768, flags=0, error_buf=0x0, error_buf_size=0) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=0x40813370, module_inst=0x40813798, parent=0x0, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:565 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=0x40813370, module_inst=0x40813798, parent=0x0, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:551 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=0x40813370, module_inst=0x40813798, parent=0x0, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:546 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

Stack memory:
40812d60: 0x40813100 0x40813370 0x42030974 0x40809b68 0x4080c558 0x42030974 0x4080c568 0x42028d56
40812d80: 0x4080c56c 0x40812d94 0x4080c570 0x42028d00 0x4080c3b4 0x00323933 0x408121c8 0x65737361
40812da0: 0x66207472 0x656c6961 0x68203a64 0x5f706165 0x73706163 0x6572665f 0x65682065 0x635f7061
40812dc0: 0x2e737061 0x39333a63 0x68282032 0x20706165 0x4e203d21 0x204c4c55 0x22202626 0x65657266
40812de0: 0x74202928 0x65677261 0x6f702074 0x65746e69 0x73692072 0x74756f20 0x65646973 0x61656820
40812e00: 0x72612070 0x22736165 0x00000029 0x408134b8 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e20: 0x40813100 0x4081324c 0x00000080 0x400316c6 0x0005a772 0x00000000 0x408121c8 0x4202b178
40812e40: 0x4202df8c 0x40812ecc 0x40813134 0x00000005 0x0000004b 0xffff0208 0x40813100 0x0000007f
40812e60: 0x00001800 0x00000000 0x00000000 0x40000000 0x40813798 0x4081d3d4 0x00000001 0x00009420
40812e80: 0x00008000 0x000000b8 0x00009420 0x40800a6e 0x00008000 0x000000b8 0x408138f0 0x40809b8e
40812ea0: 0x40813798 0x4081d3d4 0x408138f0 0x42007488 0x00008000 0x000000b8 0x408138f0 0x4200fb04
40812ec0: 0x000000b8 0x00000003 0x00000000 0x420078d6 0x00000000 0x00000000 0x00000001 0x42007edc
40812ee0: 0x00008000 0x000000b8 0x408138f0 0x4200975e 0x40812f18 0x00000004 0x40813370 0x40809b72
40812f00: 0x00001800 0x00001420 0x40813370 0x4200740c 0x40813100 0x00000054 0x00009420 0x00000000
40812f20: 0x40813370 0x00000048 0x40813370 0x00000000 0x00000080 0x40813100 0x40813798 0x408134b8
40812f40: 0x00000000 0x408134b8 0x40813370 0x00000000 0x408138f0 0x00000000 0x00000000 0x42009880
40812f60: 0x00000000 0x40813100 0x00000080 0x420091f4 0x00000000 0x00008000 0x00000000 0x00000001
40812f80: 0x00008000 0x00000078 0x40813370 0x00000000 0x40813460 0x00000080 0x40813100 0x00000000
40812fa0: 0x00000000 0x00000000 0x00000003 0x40813798 0x00008000 0x40813974 0x40813370 0x42009ee2
40812fc0: 0x4202a6f4 0x00008000 0x00000000 0x00000000 0x00000000 0x20001000 0x00000004 0x00000000
0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813000: 0x00000000 0x00000000 0x40813370 0x420082b2 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420082d0
40813020: 0x4202a620 0x0000015c 0x00000004 0x42007184 0xa5a5a5a5 0xa5a5a5a5 0x00000001 0x420073fe
40813040: 0x42007428 0x42007476 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813060: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813080: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130a0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130c0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
408130e0: 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000
40813100: 0x4d534157 0x646f6d20 0x20656c75 0x74736e69 0x69746e61 0x20657461 0x6c696166 0x203a6465
40813120: 0x74696e69 0x70706120 0x61656820 0x61662070 0x64656c69 0x00000000 0x00000000 0x00000000
40813140: 0xffffffff 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000 0x00000000



ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:547 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:550 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:553 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:542 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:563 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:553 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:556 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:548 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:546 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:548 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:544 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:557 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:544 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:547 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:544 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:530 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:548 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:536 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:544 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:523 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:547 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:551 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:547 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:547 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (226) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:567 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:545 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:551 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:550 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (226) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:563 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:552 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:542 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:564 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (226) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:567 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:541 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:545 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (126) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:549 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:547 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1413
#14 0x42007184 in iwasm_main (arg=<optimized out>) at /home/tao/Desktop/webassembly-experiments/webassembly-esp32c6/main/main.c:69
#15 0x00000000 in ?? ()
Backtrace stopped: frame did not save the PC
ELF file SHA256: 8ec2917f1

Rebooting...
ESP-ROM:esp32c6-20220919
Build:Sep 19 2022
rst:0xc (SW_CPU),boot:0xc (SPI_FAST_FLASH_BOOT)
Saved PC:0x4001975a
SPIWP:0xee
mode:DIO, clock div:2
load:0x40875720,len:0x1804
load:0x4086c410,len:0xe58
load:0x4086e610,len:0x2e24
entry 0x4086c41a
[0;32mI (26) boot: ESP-IDF v5.2.1-dirty 2nd stage bootloader[0m
[0;32mI (27) boot: compile time Apr  9 2024 13:18:14[0m
[0;32mI (28) boot: chip revision: v0.0[0m
[0;32mI (30) boot.esp32c6: SPI Speed      : 80MHz[0m
[0;32mI (35) boot.esp32c6: SPI Mode       : DIO[0m
[0;32mI (40) boot.esp32c6: SPI Flash Size : 2MB[0m
[0;32mI (44) boot: Enabling RNG early entropy source...[0m
[0;32mI (50) boot: Partition Table:[0m
[0;32mI (53) boot: ## Label            Usage          Type ST Offset   Length[0m
[0;32mI (61) boot:  0 nvs              WiFi data        01 02 00009000 00006000[0m
[0;32mI (68) boot:  1 phy_init         RF data          01 01 0000f000 00001000[0m
[0;32mI (76) boot:  2 factory          factory app      00 00 00010000 00100000[0m
[0;32mI (83) boot: End of partition table[0m
[0;32mI (87) esp_image: segment 0: paddr=00010020 vaddr=42028020 size=0a588h ( 42376) map[0m
[0;32mI (113) esp_image: segment 1: paddr=0001a5b0 vaddr=40800000 size=05a68h ( 23144) load[0m
[0;32mI (125) esp_image: segment 2: paddr=00020020 vaddr=42000020 size=2708ch (159884) map[0m
[0;32mI (192) esp_image: segment 3: paddr=000470b4 vaddr=40805a68 size=05174h ( 20852) load[0m
[0;32mI (203) esp_image: segment 4: paddr=0004c230 vaddr=4080abe0 size=021c8h (  8648) load[0m
[0;32mI (214) boot: Loaded app from partition at offset 0x10000[0m
[0;32mI (215) boot: Disabling RNG early entropy source...[0m
[0;32mI (225) cpu_start: Unicore app[0m
[0;33mW (235) clk: esp_perip_clk_init() has not been implemented yet[0m
[0;32mI (242) cpu_start: Pro cpu start user code[0m
[0;32mI (242) cpu_start: cpu freq: 160000000 Hz[0m
[0;32mI (242) cpu_start: Application information:[0m
[0;32mI (245) cpu_start: Project name:     wamr-simple[0m
[0;32mI (250) cpu_start: App version:      1e05e49-dirty[0m
[0;32mI (256) cpu_start: Compile time:     Apr  9 2024 13:18:09[0m
[0;32mI (262) cpu_start: ELF file SHA256:  8ec2917f1...[0m
[0;32mI (267) cpu_start: ESP-IDF:          v5.2.1-dirty[0m
[0;32mI (272) cpu_start: Min chip rev:     v0.0[0m
[0;32mI (277) cpu_start: Max chip rev:     v0.99 [0m
[0;32mI (282) cpu_start: Chip rev:         v0.0[0m
[0;32mI (287) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (294) heap_init: At 4080DDE0 len 0006E830 (442 KiB): RAM[0m
[0;32mI (300) heap_init: At 4087C610 len 00002F54 (11 KiB): RAM[0m
[0;32mI (306) heap_init: At 50000000 len 00003FE8 (15 KiB): RTCRAM[0m
[0;32mI (313) spi_flash: detected chip: generic[0m
[0;32mI (317) spi_flash: flash io: dio[0m
[0;33mW (321) spi_flash: Detected size(8192k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (334) sleep: Configure to isolate all GPIO pins in sleep state[0m
[0;32mI (341) sleep: Enable automatic switching of GPIO sleep configuration[0m
[0;32mI (348) main_task: Started on CPU0[0m
[0;32mI (348) main_task: Calling app_main()[0m
[0;32mI (348) wamr: Initialize WASM runtime[0m
[0;32mI (358) wamr: Run wamr with interpreter[0m
[0;32mI (368) wamr: Instantiate WASM runtime[0m
[00:00:00:554 - 408121C8]: [GC_ERROR]heap init pool buf not 8-byte aligned


assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && "free() target pointer is outside heap areas")
Core  0 register dump:
MEPC    : 0x408004ec  RA      : 0x40804778  SP      : 0x40812d60  GP      : 0x4080b3e0  
TP      : 0x40808d5c  T0      : 0x37363534  T1      : 0x7271706f  T2      : 0x33323130  
S0/FP   : 0x0000005a  S1      : 0x00000001  A0      : 0x40812d9c  A1      : 0x4080c3b5  
A2      : 0x00000001  A3      : 0x00000029  A4      : 0x00000001  A5      : 0x4080e000  
A6      : 0x00000008  A7      : 0x76757473  S2      : 0x00000009  S3      : 0x40812edd  
S4      : 0x4080c3b4  S5      : 0x4081d3d4  S6      : 0x40813798  S7      : 0x408134b8  
S8      : 0x00000000  S9      : 0x40813100  S10     : 0x00000080  S11     : 0x00000000  
T3      : 0x6e6d6c6b  T4      : 0x6a696867  T5      : 0x66656463  T6      : 0x62613938  
MSTATUS : 0x00001881  MTVEC   : 0x40800001  MCAUSE  : 0x00000007  MTVAL   : 0x00000000  
MHARTID : 0x00000000  

panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
472	    *((volatile int *) 0) = 0; // NOLINT(clang-analyzer-core.NullDereference) should be an invalid operation on targets
#0  panic_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/panic.c:472
#1  0x40804778 in esp_system_abort (details=details@entry=0x40812d9c "assert failed: heap_caps_free heap_caps.c:392 (heap != NULL && \"free() target pointer is outside heap areas\")") at /opt/esp/v5.2.1/esp-idf/components/esp_system/port/esp_system_chip.c:93
#2  0x40809b68 in __assert_func (file=file@entry=0x42028d56 "", line=line@entry=392, func=<optimized out>, func@entry=0x42030974 <__func__.4> "", expr=expr@entry=0x42028d00 "") at /opt/esp/v5.2.1/esp-idf/components/newlib/assert.c:81
#3  0x40800a6e in heap_caps_free (ptr=0x9420) at /opt/esp/v5.2.1/esp-idf/components/heap/heap_caps.c:392
#4  0x40809b8e in free (ptr=<optimized out>) at /opt/esp/v5.2.1/esp-idf/components/newlib/heap.c:39
#5  0x42007488 in os_free (ptr=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_malloc.c:76
#6  0x4200fb04 in os_munmap (addr=<optimized out>, size=<optimized out>) at /home/tao/wasm-micro-runtime/core/shared/platform/esp-idf/espidf_memmap.c:80
#7  0x420078d6 in wasm_munmap_linear_memory (mapped_mem=<optimized out>, commit_size=<optimized out>, map_size=<optimized out>) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:653
#8  0x42007edc in wasm_deallocate_linear_memory (memory_inst=memory_inst@entry=0x408138f0) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_memory.c:891
#9  0x4200975e in memory_instantiate (module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, memory=memory@entry=0x408138f0, memory_idx=memory_idx@entry=0, num_bytes_per_page=37920, init_page_count=<optimized out>, max_page_count=1, heap_size=heap_size@entry=32768, flags=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:345
#10 0x42009880 in memories_instantiate (module=module@entry=0x40813370, module_inst=module_inst@entry=0x40813798, parent=parent@entry=0x0, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:421
#11 0x42009ee2 in wasm_instantiate (module=0x40813370, parent=0x0, exec_env_main=0x0, stack_size=32768, heap_size=32768, max_memory_pages=0, error_buf=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=128) at /home/tao/wasm-micro-runtime/core/iwasm/interpreter/wasm_runtime.c:2141
#12 0x420082b2 in wasm_runtime_instantiate_internal (module=module@entry=0x40813370, parent=parent@entry=0x0, exec_env_main=exec_env_main@entry=0x0, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, max_memory_pages=max_memory_pages@entry=0, error_buf=error_buf@entry=0x40813100 "WASM module instantiate failed: init app heap failed", error_buf_size=error_buf_size@entry=128) at /home/tao/wasm-micro-runtime/core/iwasm/common/wasm_runtime_common.c:1393
#13 0x420082d0 in wasm_runtime_instantiate (module=module@entry=0x40813370, stack_size=stack_size@entry=32768, heap_size=heap_size@entry=32768, error_buf=error_buf@entry=0x40813100 "WASM module i